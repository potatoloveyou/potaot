(self["webpackChunk_04_wyy_music"]=self["webpackChunk_04_wyy_music"]||[]).push([[495],{4292:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"playListViews"},[e("header",[e("div",{staticClass:"card"},[e("img",{attrs:{src:t.playLists.coverImgUrl,alt:"song.name"}}),e("span",[t._v("歌单")]),t._m(0)]),e("div",{staticClass:"details"},[e("h2",{staticClass:"name"},[t._v(t._s(t.playLists.name))]),t._m(1)])])])},r=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"figure-svg earImg"},[e("i",{staticClass:"i-svg"}),t._v(" xxx ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"userInformation"},[e("img",{attrs:{src:"",alt:""}}),e("span",{staticClass:"userName"})])}],n=s(1673),a={name:"PlayListViews",data(){return{playLists:{}}},created(){(0,n.PN)(this.$route.query.id).then((t=>{this.playLists=t.data.playlist}))}},o=a,l=s(1656),u=(0,l.A)(o,i,r,!1,null,"e6118a7a",null),c=u.exports},574:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return P}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchViews"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading",attrs:{src:s(5241),alt:""}}),e("SearchBox",{ref:"myInput",attrs:{value:t.value},on:{"modify-value":t.modifyValue,"input-focus":t.inputFocus,"delete-input":t.deleteInput,"search-enter":function(e){return t.selectResult(t.value,e)}}}),e("SearchList",{directives:[{name:"show",rawName:"v-show",value:!t.keywords.length&&!t.selectedResults.length,expression:"!keywords.length && !selectedResults.length"}],attrs:{searchHots:t.searchHots,historys:t.historys},on:{"search-hotresult":t.selectResult,"search-history":function(e){return t.selectResult(e)},"delete-history":t.deleteHistory}}),e("SearchSuggestions",{directives:[{name:"show",rawName:"v-show",value:!t.selectedResults.length,expression:"!selectedResults.length"}],attrs:{keywords:t.keywords,value:t.value},on:{"select-result":t.selectResult}}),e("SearchSongList",{directives:[{name:"show",rawName:"v-show",value:t.selectedResults.length,expression:"selectedResults.length"}],attrs:{selectedResults:t.selectedResults,value:t.value,axiosGetSelectResult:t.axiosGetSelectResult}})],1)},r=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchBox"},[e("form",{staticClass:"form",attrs:{action:"#"},on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[t._m(0),e("input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.value},on:{input:function(e){return t.$emit("modify-value",e.target.value)},focus:function(e){return t.$emit("input-focus")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$emit("search-enter",e.target))}}}),e("figure",{directives:[{name:"show",rawName:"v-show",value:t.isInputPresent,expression:"isInputPresent"}],staticClass:"figure-svg searchDeleteImg",on:{click:function(e){return t.$emit("delete-input")}}},[e("i",{staticClass:"i-svg"})])])])},a=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"figure-svg searchImg"},[e("i",{staticClass:"i-svg"})])}],o={name:"SearchBox",props:{value:String},computed:{isInputPresent(){return!!this.value}},methods:{}},l=o,u=s(1656),c=(0,u.A)(l,n,a,!1,null,"2ae1737b",null),h=c.exports,f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchList"},[e("div",{staticClass:"search-hot-list"},[e("h3",[t._v("热门搜索")]),e("ul",t._l(t.searchHots,(function(s,i){return e("li",{key:i,staticClass:"search-hotList-item",on:{click:function(e){return t.$emit("search-hotresult",s.first)}}},[t._v(" "+t._s(s.first)+" ")])})),0)]),e("div",{staticClass:"search-history-list"},[e("ul",t._l(t.historys,(function(s,i){return e("li",{key:i,staticClass:"search-history-item"},[t._m(0,!0),e("div",[e("span",{on:{click:function(e){return t.$emit("search-history",s)}}},[t._v(t._s(s))]),e("figure",{staticClass:"figure-svg deleteItem",on:{click:function(e){return t.$emit("delete-history",s)}}},[e("i",{staticClass:"i-svg"})])])])})),0)])])},v=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"figure-svg historyItem"},[e("i",{staticClass:"i-svg"})])}],d={name:"SearchList",props:{searchHots:Array,historys:Array}},g=d,m=(0,u.A)(g,f,v,!1,null,"24bc25fc",null),p=m.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchResult"},[e("ul",[e("li",{directives:[{name:"show",rawName:"v-show",value:t.keywords.length,expression:"keywords.length"}],staticClass:"value"},[t._v('搜索"'+t._s(t.value)+'"')]),t._l(t.keywords,(function(s,i){return e("li",{key:i,on:{click:function(e){return t.$emit("select-result",s.keyword)}}},[t._m(0,!0),t._v(" "+t._s(s.keyword)+" ")])}))],2)])},w=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"figure-svg searchImg"},[e("i",{staticClass:"i-svg"})])}],_={name:"SearchResult",props:{keywords:Array,value:String}},S=_,x=(0,u.A)(S,y,w,!1,null,"53cd2eee",null),C=x.exports,k=function(){var t=this,e=t._self._c;return e("div",{ref:"SearchSongList",staticClass:"searchSongList",on:{scroll:t.handleScroll}},[e("ul",t._l(t.selectedResults,(function(s){return e("li",{key:s.id,staticClass:"songItem"},[e("a",[e("div",{staticClass:"introduce"},[e("div",{staticClass:"song-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"song-artist"},[e("div",{staticClass:"toneQualityImg materialImg"}),e("span",[t._v(t._s(s.artists[0].name)+"-"+t._s(s.album.name))])])]),e("div",{staticClass:"play-icon materialImg"})])])})),0),e("img",{directives:[{name:"show",rawName:"v-show",value:t.isBottom,expression:"isBottom"}],staticClass:"bottomLoading",attrs:{src:s(8719),alt:""}})])},R=[],b={name:"SearchSongList",props:{value:String,selectedResults:Array,axiosGetSelectResult:Function},data(){return{isBottom:!1,SearchSongList:null}},mounted(){this.SearchSongList=this.$refs.SearchSongList},methods:{async handleScroll(){!this.isBottom&&this.SearchSongList.scrollTop+this.SearchSongList.clientHeight+50>=this.SearchSongList.scrollHeight&&(this.isBottom=!0,await this.axiosGetSelectResult(),this.isBottom=!1)}}},L=b,I=(0,u.A)(L,k,R,!1,null,"5d101ec6",null),j=I.exports,N=s(1673);const O=s(896);var $={name:"SearchViews",components:{SearchBox:h,SearchList:p,SearchSuggestions:C,SearchSongList:j},data(){return{value:"",searchHots:[],keywords:[],isConfirm:!1,selectedResults:[],loading:!1,historys:JSON.parse(localStorage.getItem("searchHistory"))||[]}},methods:{modifyValue(t){this.isConfirm=!1,this.value=t},deleteInput(){this.value="",this.keywords=[],this.selectedResults=[]},async inputFocus(){this.isConfirm=!1,this.selectedResults=[],this.value&&0===this.selectedResults.length&&0===this.keywords.length&&(this.loading=!0,await(0,N.yY)(this.value).then((t=>{this.loading=!1,this.keywords=t.data.result.allMatch})))},async axiosGetSelectResult(){await(0,N.Sf)(this.value,this.selectedResults.length).then((t=>{this.selectedResults=[...new Set([...this.selectedResults,...t.data.result.songs].map((t=>t)))]}))},async selectResult(t,e){e&&e.blur(),this.isConfirm=!0,this.value=t,this.loading=!0,this.value&&0===this.selectedResults.length&&(this.keywords=[],await this.axiosGetSelectResult(),this.loading=!1),this.historys=[...new Set([t,...this.historys])]},deleteHistory(t){console.log(t),this.historys=this.historys.filter((e=>e!==t))}},created(){this.loading=!0,Promise.all([(0,N.gi)()]).then((([t])=>{this.loading=!1,this.searchHots=t.data.result.hots}))},watch:{value:O((function(t){t&&!1===this.isConfirm?(this.loading=!0,(0,N.yY)(t).then((t=>{this.loading=!1,this.value&&(this.keywords=t.data.result.allMatch)}))):""==t&&!1===this.isConfirm&&(this.loading=!1,this.keywords=[],this.selectedResults=[])}),500),historys(t){localStorage.setItem("searchHistory",JSON.stringify(t))}}},A=$,H=(0,u.A)(A,i,r,!1,null,"831305ee",null),P=H.exports},5488:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"songPlayViews"},[t._v("songPlayViews")])},r=[],n={name:"SongPlayViews"},a=n,o=s(1656),l=(0,o.A)(a,i,r,!1,null,"077ca4fa",null),u=l.exports},7874:function(t,e,s){var i=s(8606),r=i.Symbol;t.exports=r},9315:function(t,e,s){var i=s(7874),r=s(38),n=s(5677),a="[object Null]",o="[object Undefined]",l=i?i.toStringTag:void 0;function u(t){return null==t?void 0===t?o:a:l&&l in Object(t)?r(t):n(t)}t.exports=u},4867:function(t,e,s){var i=s(5761),r=/^\s+/;function n(t){return t?t.slice(0,i(t)+1).replace(r,""):t}t.exports=n},6903:function(t,e,s){var i="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;t.exports=i},38:function(t,e,s){var i=s(7874),r=Object.prototype,n=r.hasOwnProperty,a=r.toString,o=i?i.toStringTag:void 0;function l(t){var e=n.call(t,o),s=t[o];try{t[o]=void 0;var i=!0}catch(l){}var r=a.call(t);return i&&(e?t[o]=s:delete t[o]),r}t.exports=l},5677:function(t){var e=Object.prototype,s=e.toString;function i(t){return s.call(t)}t.exports=i},8606:function(t,e,s){var i=s(6903),r="object"==typeof self&&self&&self.Object===Object&&self,n=i||r||Function("return this")();t.exports=n},5761:function(t){var e=/\s/;function s(t){var s=t.length;while(s--&&e.test(t.charAt(s)));return s}t.exports=s},896:function(t,e,s){var i=s(9692),r=s(1087),n=s(4243),a="Expected a function",o=Math.max,l=Math.min;function u(t,e,s){var u,c,h,f,v,d,g=0,m=!1,p=!1,y=!0;if("function"!=typeof t)throw new TypeError(a);function w(e){var s=u,i=c;return u=c=void 0,g=e,f=t.apply(i,s),f}function _(t){return g=t,v=setTimeout(C,e),m?w(t):f}function S(t){var s=t-d,i=t-g,r=e-s;return p?l(r,h-i):r}function x(t){var s=t-d,i=t-g;return void 0===d||s>=e||s<0||p&&i>=h}function C(){var t=r();if(x(t))return k(t);v=setTimeout(C,S(t))}function k(t){return v=void 0,y&&u?w(t):(u=c=void 0,f)}function R(){void 0!==v&&clearTimeout(v),g=0,u=d=c=v=void 0}function b(){return void 0===v?f:k(r())}function L(){var t=r(),s=x(t);if(u=arguments,c=this,d=t,s){if(void 0===v)return _(d);if(p)return clearTimeout(v),v=setTimeout(C,e),w(d)}return void 0===v&&(v=setTimeout(C,e)),f}return e=n(e)||0,i(s)&&(m=!!s.leading,p="maxWait"in s,h=p?o(n(s.maxWait)||0,e):h,y="trailing"in s?!!s.trailing:y),L.cancel=R,L.flush=b,L}t.exports=u},9692:function(t){function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},5091:function(t){function e(t){return null!=t&&"object"==typeof t}t.exports=e},9299:function(t,e,s){var i=s(9315),r=s(5091),n="[object Symbol]";function a(t){return"symbol"==typeof t||r(t)&&i(t)==n}t.exports=a},1087:function(t,e,s){var i=s(8606),r=function(){return i.Date.now()};t.exports=r},4243:function(t,e,s){var i=s(4867),r=s(9692),n=s(9299),a=NaN,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function h(t){if("number"==typeof t)return t;if(n(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var s=l.test(t);return s||u.test(t)?c(t.slice(2),s?2:8):o.test(t)?a:+t}t.exports=h},8719:function(t,e,s){"use strict";t.exports=s.p+"img/bottomLoading.a9b823a3.svg"},5241:function(t,e,s){"use strict";t.exports=s.p+"img/doubleRingLoading.cced4e34.gif"}}]);
//# sourceMappingURL=SearchViews.84667f39.js.map